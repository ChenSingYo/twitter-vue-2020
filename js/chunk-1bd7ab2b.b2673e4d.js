(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bd7ab2b"],{"0418":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[t.enableBackBtn?a("unicon",{attrs:{name:"cst-back-icon",fill:"black",viewBox:"0 0 64 64",width:"24px",height:"24px"},on:{click:t.handleBack}}):t._e(),a("span",{staticClass:"title",class:{"ml-0":t.enableBackBtn}},[t._v(t._s(t.title))])],1)])},n=[],i={name:"Header",props:{title:{type:String,default:""},enableBackBtn:{type:Boolean,default:!1}},methods:{handleBack:function(){this.$router.go(-1)}}},c=i,r=(a("132f"),a("2877")),l=Object(r["a"])(c,s,n,!1,null,"7141969e",null);e["a"]=l.exports},"115a":function(t,e,a){"use strict";a("e6d7")},"132f":function(t,e,a){"use strict";a("275b")},1629:function(t,e,a){},"275b":function(t,e,a){},"7c4f":function(t,e,a){"use strict";a("1629")},9729:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweet-container"},[a("NavSidebar"),a("TweetArticle"),a("RecommendSidebar")],1)},n=[],i=a("bb41"),c=a("827d"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tweet"},[a("div",{staticClass:"tweet-container"},[a("Header",{attrs:{title:"推文","enable-back-btn":!0}}),a("section",{ref:"tweetBoard",staticClass:"tweet-board"},[a("div",{staticClass:"borad-container"},[a("div",{staticClass:"user-info"},[a("img",{staticClass:"avatar",attrs:{src:t.tweet.user.avatar}}),a("div",{staticClass:"name"},[t._v(t._s(t.tweet.user.name||"使用者"))]),a("div",{staticClass:"tag"},[t._v(t._s(t.tweet.user.account||"@account"))])]),a("div",{staticClass:"info-container"},[a("p",{staticClass:"content"},[t._v(" "+t._s(t.tweet.description)+" ")]),a("div",{staticClass:"time-wrapper"},[a("span",[t._v(t._s(t.time))]),a("span",[t._v(t._s(t.fullYear))])])]),a("div",{staticClass:"count-container"},[a("div",{staticClass:"reply-wrapper"},[a("span",{staticClass:"count"},[t._v(t._s(t.tweet.repliedCount))]),a("span",{staticClass:"text"},[t._v(" 回覆")])]),a("div",{staticClass:"like-wrapper"},[a("span",{staticClass:"count"},[t._v(t._s(t.tweet.likedCount))]),a("span",{staticClass:"text"},[t._v(" 喜歡次數")])])]),a("div",{staticClass:"toolbar"},[a("unicon",{attrs:{name:"comment",fill:"#657786",width:"30px",height:"30px"},on:{click:t.replyPopupHandle}}),a("unicon",{attrs:{name:"heart-alt",fill:"#657786",width:"30px",height:"30px"}})],1)])]),t.tweet.tweetReplies?a("section",{staticClass:"reply-cell",style:{"padding-bottom":t.tweetBoardHeight+"px"}},t._l(t.tweet.tweetReplies,(function(e){return a("ReplyCell",{key:e.id,attrs:{reply:e,user:t.tweet.user}})})),1):t._e(),a("section",[a("ReplyTweetPopup",{attrs:{tweet:t.tweet,"show-popup-view":t.showReplyPopup},on:{"after-close":t.handleClose,"after-update-replies":t.afterUpdateRepliesHandle}})],1)],1)])},l=[],o=a("1da1"),p=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("0418")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cell"},[a("div",{staticClass:"cell-container",on:{click:t.replyHandle}},[a("img",{staticClass:"avatar",attrs:{src:t.reply.User.avatar}}),a("div",{staticClass:"info-container"},[a("div",{staticClass:"message-wrapper"},[a("span",{staticClass:"name"},[t._v(t._s(t.reply.User.name))]),a("span",{staticClass:"tag"},[t._v(t._s(t.reply.User.account)+"・"+t._s(t.hour))])]),a("div",{staticClass:"reply-wrapper"},[a("span",{staticClass:"reply-text"},[t._v("回覆")]),a("span",{staticClass:"reply-tag"},[t._v(t._s(t.user.account))])]),a("p",{staticClass:"content"},[t._v(" "+t._s(t.reply.comment)+" ")])])])])},d=[],f=a("c1df"),w=a.n(f),h={name:"ReplyCell",props:{reply:{id:-1,tweetId:-1,comment:"",updatedAt:"",User:{id:-1,avatar:"",name:"",account:""}},user:{id:-1,avatar:"",name:"",account:""}},computed:{hour:function(){return this.reply.updatedAt?(w.a.locale("zh_TW"),w()(this.reply.updatedAt).fromNow()):""}},methods:{replyHandle:function(){}}},v=h,m=(a("115a"),a("2877")),C=Object(m["a"])(v,u,d,!1,null,"224c81f1",null),_=C.exports,b=a("6599"),y=a("6783"),g=a("2fa3"),R={name:"TweetArticle",components:{Header:p["a"],ReplyCell:_,ReplyTweetPopup:b["a"]},data:function(){return{isMounted:!1,isLoading:!1,showReplyPopup:!1,tweet:{id:-1,UserId:-1,description:"",createdAt:"",updatedAt:"",likedCount:-1,repliedCount:-1,user:{avatar:"",name:"",account:""},tweetReplies:[]},id:this.$route.params.id}},computed:{tweetBoardHeight:function(){if(!this.isMounted)return"0px";var t=this.$refs.tweetBoard.offsetHeight+55;return t},time:function(){return w.a.locale("zh_TW"),w.a.utc(this.tweet.createdAt).format("A HH:mm")},fullYear:function(){return w.a.utc(this.tweet.createdAt).format("YYYY年MM月DD日")}},mounted:function(){this.isMounted=!0},created:function(){this.fetchTweet({id:this.id})},methods:{replyPopupHandle:function(){this.showReplyPopup=!0},handleClose:function(){this.showReplyPopup=!1},fetchTweet:function(t){var e=this,a=t.id;try{var s=y["a"].getTweet({id:a}),n=y["a"].getTweetReplies({id:a});Promise.all([s,n]).then((function(t){var a=t[0].data,s=t[1].data;e.tweet=a,e.tweet.tweetReplies=s})).catch((function(t){console.log(t)})).finally((function(){}))}catch(i){console.log(i),g["a"].fire({icon:"error",title:"取得推文錯誤"})}},afterUpdateRepliesHandle:function(){this.afterFetchReplies({id:this.id}),this.showReplyPopup=!1},afterFetchReplies:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.id,a.prev=1,a.next=4,y["a"].getTweetReplies({id:s});case 4:n=a.sent,i=n.data,e.tweet.tweetReplies=i,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),g["a"].fire({icon:"error",title:"取得回覆列表錯誤，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()}}},k=R,x=(a("a3a8"),Object(m["a"])(k,r,l,!1,null,"5648055e",null)),B=x.exports,H={name:"TweetPage",components:{NavSidebar:i["a"],RecommendSidebar:c["a"],TweetArticle:B}},T=H,A=(a("7c4f"),Object(m["a"])(T,s,n,!1,null,"c0a39b90",null));e["default"]=A.exports},a3a8:function(t,e,a){"use strict";a("bf30")},bf30:function(t,e,a){},e6d7:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1bd7ab2b.b2673e4d.js.map