(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a53ac68"],{"0d81":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"follow-container"},[o("NavSidebar"),o("UserFollowPanels",{attrs:{"current-user":t.currentUser}}),o("RecommendSidebar")],1)},l=[],r=o("5530"),a=o("bb41"),i=o("827d"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"follow"},[o("UserHeader",{attrs:{name:t.currentUser.name,count:t.currentUser.tweetCount}}),o("section",{staticClass:"follow-tabs"},[o("div",{staticClass:"tab-container"},[o("tabs",{attrs:{options:{defaultTabHash:"first-tab",useUrlFragment:!1}},on:{changed:t.tabChanged}},[o("tab",{attrs:{id:"first-tab",name:"跟隨者"}},t._l(t.followersData,(function(e){return o("UserFollowCell",{key:e.id,attrs:{"inital-follow":e},on:{"after-to-profile":t.afterToProfileHandle}})})),1),o("tab",{attrs:{id:"second-tab",name:"正在跟隨"}},t._l(t.followingData,(function(e){return o("UserFollowCell",{key:e.id,attrs:{"inital-follow":e},on:{"after-to-profile":t.afterToProfileHandle}})})),1)],1)],1)])],1)},c=[],u=o("1da1"),f=(o("96cf"),o("7923")),w=o("3e69"),d=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cell"},[o("div",{staticClass:"cell-container"},[o("img",{staticClass:"avatar",attrs:{src:t.follow.avatar},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toProfileHandle(e)}}}),o("div",{staticClass:"info-container"},[o("div",{staticClass:"name",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toProfileHandle(e)}}},[t._v(" "+t._s(t.follow.name)+" ")]),o("div",{staticClass:"tag"},[t._v("@"+t._s(t.follow.account))]),o("p",{staticClass:"content"},[t._v(" "+t._s(t.follow.introduction)+" ")]),o("button",{staticClass:"btn follow-btn",class:{isActive:t.follow.isFollowing},on:{click:t.followToggleHandle}},[t._v(" "+t._s(t.follow.isFollowing?"正在跟隨":"跟隨")+" ")])])])])},h=[],b=o("604d"),g=o("2fa3"),p={name:"UserFollowCell",props:{initalFollow:{followerId:-1,followingId:-1,account:"",name:"",avatar:"",introduction:"",followshipCreatedAt:"",isFollowing:!1}},computed:{id:function(){return this.initalFollow.followerId>0?this.initalFollow.followerId:this.initalFollow.followingId}},data:function(){return{follow:{followerId:-1,followingId:-1,account:"",name:"",avatar:"",introduction:"",followshipCreatedAt:"",isFollowing:!1}}},watch:{initalFollow:function(t){console.log(t),this.follow=Object(r["a"])(Object(r["a"])({},this.follow),t)}},created:function(){this.initalFollow.followingId?this.follow=Object(r["a"])(Object(r["a"])({},this.initalFollow),{},{isFollowing:!0}):this.follow=Object(r["a"])({},this.initalFollow)},methods:{followToggleHandle:function(){this.follow.isFollowing?this.removeFollow({id:this.id}):this.addFollow({id:this.id}),this.follow=Object(r["a"])(Object(r["a"])({},this.follow),{},{isFollowing:!this.follow.isFollowing}),this.$emit("after-following-changed")},toProfileHandle:function(){this.$emit("after-to-profile",{userId:this.follow.followerId||this.follow.followingId})},addFollow:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,l,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=t.id,o.prev=1,o.next=4,b["a"].addFollowing({id:n});case 4:if(l=o.sent,a=l.data,"success"===a.status){o.next=8;break}throw new Error(a.message);case 8:g["a"].fire({icon:"success",title:"已跟隨該使用者"}),o.next=16;break;case 11:o.prev=11,o.t0=o["catch"](1),console.log(o.t0),e.follow=Object(r["a"])(Object(r["a"])({},e.follow),{},{isFollowing:!1}),g["a"].fire({icon:"error",title:"跟隨使用者錯誤，請稍後再試"});case 16:case"end":return o.stop()}}),o,null,[[1,11]])})))()},removeFollow:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,l,a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=t.id,o.prev=1,o.next=4,b["a"].removeFollowing({id:n});case 4:if(l=o.sent,a=l.data,"success"===a.status){o.next=8;break}throw new Error(a.message);case 8:g["a"].fire({icon:"success",title:"已移除跟隨該使用者"}),o.next=16;break;case 11:o.prev=11,o.t0=o["catch"](1),console.log(o.t0),e.follow=Object(r["a"])(Object(r["a"])({},e.follow),{},{isFollowing:!0}),g["a"].fire({icon:"error",title:"刪除跟隨使用者錯誤，請稍後再試"});case 16:case"end":return o.stop()}}),o,null,[[1,11]])})))()}}},v=p,m=(o("11e2"),o("2877")),F=Object(m["a"])(v,d,h,!1,null,"19847662",null),C=F.exports,j=o("4cce"),O={name:"UserFollowPanels",props:{currentUser:{id:-1,account:"",name:"",avatar:"",cover:"",introduction:""}},components:{Tabs:f["Tabs"],Tab:f["Tab"],UserHeader:w["a"],UserFollowCell:C},data:function(){return{followersData:[],followingData:[]}},methods:{tabChanged:function(t){"first-tab"===t.tab.id?this.fetchCurrentFollowers({id:this.currentUser.id}):this.fetchCurrentFollowing({id:this.currentUser.id})},afterToProfileHandle:function(t){var e=t.userId,o=this.$route.params.id;console.log({userId:e,id:o}),parseInt(o)!==parseInt(e)&&this.$router.push({path:"/profile/".concat(e)})},fetchCurrentFollowing:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,l,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=t.id,o.prev=1,o.next=4,j["a"].getCurrentUserFollowing({id:n});case 4:l=o.sent,r=l.data,e.followingData=r,o.next=13;break;case 9:o.prev=9,o.t0=o["catch"](1),console.log(o.t0),g["a"].fire({icon:"error",title:"取得跟隨中的資料錯誤，請稍後再試"});case 13:case"end":return o.stop()}}),o,null,[[1,9]])})))()},fetchCurrentFollowers:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function o(){var n,l,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=t.id,o.prev=1,o.next=4,j["a"].getCurrentUserFollowers({id:n});case 4:l=o.sent,r=l.data,e.followersData=r,o.next=13;break;case 9:o.prev=9,o.t0=o["catch"](1),console.log(o.t0),g["a"].fire({icon:"error",title:"取得跟隨者的資料錯誤，請稍後再試"});case 13:case"end":return o.stop()}}),o,null,[[1,9]])})))()}}},U=O,k=(o("2721"),Object(m["a"])(U,s,c,!1,null,"64e4f268",null)),x=k.exports,_=o("2f62"),I={name:"UserFollow",components:{NavSidebar:a["a"],RecommendSidebar:i["a"],UserFollowPanels:x},computed:Object(r["a"])({},Object(_["b"])(["currentUser"]))},H=I,P=(o("eb62"),Object(m["a"])(H,n,l,!1,null,"2425d544",null));e["default"]=P.exports},"11e2":function(t,e,o){"use strict";o("ad3b")},2721:function(t,e,o){"use strict";o("f502")},"96c1":function(t,e,o){},ad3b:function(t,e,o){},eb62:function(t,e,o){"use strict";o("96c1")},f502:function(t,e,o){}}]);
//# sourceMappingURL=chunk-4a53ac68.abe2feaa.js.map