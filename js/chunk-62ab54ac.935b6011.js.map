{"version":3,"sources":["webpack:///./src/views/Chatroom.vue?f448","webpack:///./src/components/OnlineUsers.vue?ed0a","webpack:///src/components/OnlineUsers.vue","webpack:///./src/components/OnlineUsers.vue?7ffc","webpack:///./src/components/OnlineUsers.vue?c510","webpack:///./src/components/ChatData.vue?7a0d","webpack:///src/components/ChatData.vue","webpack:///./src/components/ChatData.vue?a66a","webpack:///./src/components/ChatData.vue?3e68","webpack:///src/views/Chatroom.vue","webpack:///./src/views/Chatroom.vue?80c7","webpack:///./src/views/Chatroom.vue?485b","webpack:///./src/components/ChatData.vue?ed47","webpack:///./src/components/OnlineUsers.vue?4afd","webpack:///./src/views/Chatroom.vue?cc8c","webpack:///./src/assets/icon/icon_message.svg"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","onlineCount","_l","onlineUser","key","id","attrs","ref","chatRecord","on","$event","stopPropagation","preventDefault","handleSendMsg","directives","name","rawName","value","expression","domProps","target","composing","chatMessage","_m","staticRenderFns","params","avatar","account","props","type","Object","required","component","text","_e","time","data","msgType","userIsOnline","userIsOffline","isRemoteMsg","isLocalMsg","created","handleData","methods","components","NavSidebar","OnlineUsers","ChatData","onlineUsers","chatRecords","computed","connectSever","watch","$nextTick","container","scrollTop","lastElementChild","offsetTop","trim","$socket","emit","msg","disconnectSever","disconnect","connect","sockets","console","log","userList","userOnline","push","userOffline","chatMsg","ChatId","userId","UserId","username","historyMsg","destroyed","module","exports"],"mappings":"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","file":"js/chunk-62ab54ac.935b6011.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chatroom-container\"},[[_c('div',{staticClass:\"left-navbar\"},[_c('NavSidebar')],1),_c('div',{staticClass:\"user-list\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"上線使用者 (\"+_vm._s(_vm.onlineCount)+\")\")]),_vm._l((_vm.onlineUsers),function(onlineUser){return _c('OnlineUsers',{key:onlineUser.id,attrs:{\"onlineUser\":onlineUser}})})],2),_c('div',{staticClass:\"chatroom\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" 公開聊天室 \")]),_c('div',{ref:\"messageContainer\",staticClass:\"message-container\"},[_vm._l((_vm.chatRecords),function(chatRecord){return _c('ChatData',{key:chatRecord.id,attrs:{\"chatRecord\":chatRecord}})}),_c('div',{staticClass:\"send-box\"},[_c('form',{staticClass:\"form-container\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSendMsg($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.chatMessage),expression:\"chatMessage\"}],staticClass:\"text-input\",attrs:{\"type\":\"text\",\"name\":\"\",\"placeholder\":\"輸入訊息...\"},domProps:{\"value\":(_vm.chatMessage)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.chatMessage=$event.target.value}}}),_vm._m(0)])])],2)])]],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"send-btn\",attrs:{\"type\":\"submit\"}},[_c('img',{attrs:{\"src\":require(\"../assets/icon/icon_message.svg\"),\"alt\":\"send\"}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-container\"},[_c('router-link',{attrs:{\"to\":{ name: 'other-profile', params: { id: _vm.onlineUser.id } }}},[_c('img',{attrs:{\"src\":_vm.onlineUser.avatar}})]),_c('router-link',{attrs:{\"to\":{ name: 'other-profile', params: { id: _vm.onlineUser.id } }}},[_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.onlineUser.name))])]),_c('router-link',{attrs:{\"to\":{ name: 'other-profile', params: { id: _vm.onlineUser.id } }}},[_c('span',{staticClass:\"user-account\"},[_vm._v(\"@\"+_vm._s(_vm.onlineUser.account))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-container\">\n    <router-link :to=\"{ name: 'other-profile', params: { id: onlineUser.id } }\">\n      <img :src=\"onlineUser.avatar\" />\n    </router-link>\n    <router-link :to=\"{ name: 'other-profile', params: { id: onlineUser.id } }\">\n      <span class=\"user-name\">{{ onlineUser.name }}</span>\n    </router-link>\n    <router-link :to=\"{ name: 'other-profile', params: { id: onlineUser.id } }\">\n      <span class=\"user-account\">@{{ onlineUser.account }}</span>\n    </router-link>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'OnlineUsers',\n  props: {\n    onlineUser: {\n      type: Object,\n      required: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-container {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 15px;\n\n  img {\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    vertical-align: middle;\n    object-fit: cover;\n  }\n  .user-name {\n    color: var(--black-clr);\n    font-weight: 500;\n    margin-left: 10px;\n  }\n  .user-account {\n    color: var(--cement-gary-clr);\n    margin-left: 7px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnlineUsers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnlineUsers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OnlineUsers.vue?vue&type=template&id=63190f12&scoped=true&\"\nimport script from \"./OnlineUsers.vue?vue&type=script&lang=js&\"\nexport * from \"./OnlineUsers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OnlineUsers.vue?vue&type=style&index=0&id=63190f12&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"63190f12\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.userIsOnline)?_c('div',{staticClass:\"user-active\"},[_c('span',{staticClass:\"user-active-txt\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.text))])]):_vm._e(),(_vm.userIsOffline)?_c('div',{staticClass:\"user-active\"},[_c('span',{staticClass:\"user-active-txt\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.text)+\" \")])]):_vm._e(),_c('div',{staticClass:\"message-box\"},[(_vm.isRemoteMsg)?_c('div',{staticClass:\"remote-msg\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.chatRecord.avatar,\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"msg-box\"},[_c('div',{staticClass:\"receive-text\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.text)+\" \")]),_c('div',{staticClass:\"receive-time\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.time)+\" \")])])]):_vm._e(),(_vm.isLocalMsg)?_c('div',{staticClass:\"local-msg\"},[_c('div',{staticClass:\"send-text\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.text)+\" \")]),_c('div',{staticClass:\"send-time\"},[_vm._v(\" \"+_vm._s(_vm.chatRecord.time)+\" \")])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- 遠端使用者上線提示 -->\n    <div class=\"user-active\" v-if=\"userIsOnline\">\n      <span class=\"user-active-txt\"> {{chatRecord.text}}</span>\n    </div>\n    <!-- 遠端使用者下線提示 -->\n    <div class=\"user-active\" v-if=\"userIsOffline\">\n      <span class=\"user-active-txt\"> {{chatRecord.text}} </span>\n    </div>\n    <div class=\"message-box\">\n    <!-- 遠端使用者 -->\n      <div class=\"remote-msg\" v-if=\"isRemoteMsg\">\n        <div class=\"avatar\">\n          <img\n            :src=\"chatRecord.avatar\"\n            alt=\"avatar\"\n          />\n        </div>\n        <div class=\"msg-box\">\n          <div class=\"receive-text\">\n            {{chatRecord.text}}\n          </div>\n          <div class=\"receive-time\">\n            {{chatRecord.time}}\n          </div>\n        </div>\n      </div>\n      <!-- 本地使用者 -->\n      <div class=\"local-msg\" v-if=\"isLocalMsg\">\n        <div class=\"send-text\">\n          {{chatRecord.text}}\n        </div>\n        <div class=\"send-time\">\n          {{chatRecord.time}}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ChatRecords',\n  props: {\n    chatRecord: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      msgType: this.chatRecord.msgType,\n      userIsOnline: false,\n      userIsOffline: false,\n      isRemoteMsg: false,\n      isLocalMsg: false\n    }\n  },\n  created() {\n    this.handleData()\n  },\n  methods: {\n    handleData() {\n      switch (this.msgType) {\n        case 'userOnline':\n          this.userIsOnline = true\n          this.userIsOffline = false\n          this.isRemoteMsg = false\n          this.isLocalMsg = false\n          break\n        case 'userOffline':\n          this.userIsOnline = false\n          this.userIsOffline = true\n          this.isRemoteMsg = false\n          this.isLocalMsg = false\n          break\n        case 'isRemoteMsg':\n          this.userIsOnline = false\n          this.userIsOffline = false\n          this.isRemoteMsg = true\n          this.isLocalMsg = false\n          break\n        case 'isLocalMsg':\n          this.userIsOnline = false\n          this.userIsOffline = false\n          this.isRemoteMsg = false\n          this.isLocalMsg = true\n          break\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.user-active {\n  display: flex;\n  height: 30px;\n  justify-content: center;\n  margin: 10px 0;\n\n  .user-active-txt {\n    background-color: var(--gray-clr);\n    color: var(--cement-gary-clr);\n    padding: 5px 15px;\n    border-radius: 20px;\n  }\n}\n.message-box {\n  .local-msg {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n    margin-bottom: 10px;\n\n    .send-text {\n      padding: 10px 15px;\n      border-radius: 40px 40px 0 40px;\n      margin-right: 20px;\n      margin-left: auto;\n      background: var(--primary-clr);\n      color: white;\n    }\n    .send-time {\n      /* outline: 1px solid red; */\n      text-align: right;\n      margin-right: 20px;\n      color: var(--cement-gary-clr);\n      font-size: 13px;\n    }\n  }\n  .remote-msg {\n    display: flex;\n\n    .avatar {\n      /* outline: 1px solid red; */\n      margin-left: 10px;\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n      overflow: hidden;\n      flex-shrink: 0;\n\n      img {\n        width: 100%;\n        height: 100%;\n        vertical-align: middle;\n        object-fit: cover;\n      }\n    }\n    .msg-box {\n      .receive-text {\n        background: var(--dialogue-blue-clr);\n        padding: 10px 15px;\n        margin-left: 13px;\n        margin-right: 90px;\n        position: relative;\n        border-radius: 40px 40px 40px 0;\n      }\n      .receive-time {\n        display: inline-block;\n        margin-left: 13px;\n        color: var(--cement-gary-clr);\n        font-size: 13px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatData.vue?vue&type=template&id=328af7f7&scoped=true&\"\nimport script from \"./ChatData.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatData.vue?vue&type=style&index=0&id=328af7f7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"328af7f7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"chatroom-container\">\n    <template>\n      <!-- 導覽列 -->\n      <div class=\"left-navbar\">\n        <NavSidebar />\n      </div>\n      <!-- 上線使用者 -->\n      <div class=\"user-list\">\n        <div class=\"title\">上線使用者 ({{ onlineCount }})</div>\n        <!-- v-for OnlineUsers -->\n        <OnlineUsers\n          v-for=\"onlineUser in onlineUsers\"\n          :key=\"onlineUser.id\"\n          :onlineUser=\"onlineUser\"\n        />\n      </div>\n      <!-- 公開聊天室 -->\n      <div class=\"chatroom\">\n        <div class=\"title\">\n          公開聊天室\n        </div>\n        <div\n          class=\"message-container\"\n          ref=\"messageContainer\"\n        >\n          <ChatData\n            v-for=\"chatRecord in chatRecords\"\n            :key=\"chatRecord.id\"\n            :chatRecord=\"chatRecord\"\n          />\n          <!-- 輸入欄 -->\n          <div class=\"send-box\">\n            <form @click.stop.prevent=\"handleSendMsg\" class=\"form-container\">\n              <input\n                type=\"text\"\n                name=\"\"\n                placeholder=\"輸入訊息...\"\n                class=\"text-input\"\n                v-model=\"chatMessage\"\n              />\n              <button type=\"submit\" class=\"send-btn\">\n                <img src=\"../assets/icon/icon_message.svg\" alt=\"send\" />\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport OnlineUsers from './../components/OnlineUsers'\nimport ChatData from './../components/ChatData'\nimport NavSidebar from '../components/NavSidebar'\nimport { mapState } from 'vuex'\nimport moment from 'moment'\n// import { Toast } from './../utils/helpers'\n\nexport default {\n  name: 'ChatRoom',\n  components: {\n    NavSidebar,\n    OnlineUsers,\n    ChatData\n  },\n  data() {\n    return {\n      onlineCount: 0,\n      onlineUsers: [],\n      chatRecords: [],\n      chatMessage: ''\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  created() {\n    this.connectSever()\n  },\n  watch: {\n    chatRecords() {\n      this.$nextTick(() => {\n        const container = this.$refs.messageContainer\n        container.scrollTop = container.lastElementChild.offsetTop\n      })\n    }\n  },\n  methods: {\n    handleSendMsg() {\n      if (this.chatMessage.trim() !== '') {\n        const msg = this.chatMessage\n        this.$socket.emit('userMsg', msg)\n      }\n      this.chatMessage = ''\n    },\n    disconnectSever() {\n      this.$socket.disconnect()\n    },\n    connectSever() {\n      this.$socket.connect()\n      this.$socket.emit('openPublicRoom')\n    }\n  },\n  sockets: {\n    connect() {\n      console.log('socket connected')\n    },\n    disconnect() {\n      console.log('socket disconnected...')\n    },\n    // 取得所有上線使用者\n    userList(onlineUsers) {\n      this.onlineUsers = onlineUsers\n    },\n    // 統計上線使用者\n    onlineCount(onlineCount) {\n      this.onlineCount = onlineCount\n    },\n    // 向聊天室推播其他使用者上線訊息 msg-type:userOnline\n    userOnline(userMsg) {\n      this.chatRecords.push({ ...userMsg })\n    },\n    // 向聊天室推播其他使用者離線訊息  msg-type:userOffline\n    userOffline(userMsg) {\n      this.chatRecords.push({ ...userMsg })\n    },\n    // 向聊天室推播訊息 msg-type: localMessage || remoteMessage\n    chatMsg(data) {\n      if (!data.text) {\n        return\n      }\n      this.chatRecords.push({\n        id: data.ChatId,\n        userId: data.UserId,\n        text: data.text,\n        msgType:\n          data.UserId === this.currentUser.id ? 'isLocalMsg' : 'isRemoteMsg',\n        name: data.username,\n        avatar: data.avatar,\n        time: moment\n          .utc()\n          .locale('zh_TW')\n          .utcOffset('+08:00')\n          .format('h:mm a')\n      })\n    },\n    // 留存歷史訊息\n    historyMsg(datas) {\n      for (const data of datas) {\n        this.chatRecords.push({\n          id: data.id,\n          userId: data.UserId,\n          text: data.text,\n          msgType: data.UserId === this.currentUser.id ? 'isLocalMsg' : 'isRemoteMsg',\n          name: data.username,\n          avatar: data.avatar,\n          time: data.time\n        })\n      }\n    }\n  },\n  destroyed() {\n    console.log('disconnectSever')\n    this.disconnectSever()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* 三區塊*/\n.chatroom-container {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  height: 100vh;\n\n  .left-navbar {\n    border-right: 1px solid var(--light-gary-clr);\n  }\n  /* 上線使用者 */\n  .user-list {\n    width: 25%;\n    border-right: 1px solid var(--light-gary-clr);\n\n    .title {\n      font-size: 16px;\n      font-weight: 600;\n      color: var(--black-clr);\n      border-bottom: 1px solid var(--light-gary-clr);\n      padding: 20px 15px 15px 15px;\n    }\n  }\n  /* 公開聊天室 */\n  .chatroom {\n    /* outline: 1px solid red; */\n    /* background-color: pink; */\n    position: relative;\n    width: 50%;\n    height: 100vh;\n    border-right: 1px solid var(--light-gary-clr);\n\n    .title {\n      font-size: 16px;\n      font-weight: 600;\n      color: var(--black-clr);\n      border-bottom: 1px solid var(--light-gary-clr);\n      padding: 20px 15px 15px 15px;\n    }\n    /* 聊天室對話框 */\n    .message-container {\n      height: calc(100vh - 130px);\n      overflow-y: scroll;\n      padding: 10px 0;\n      .send-box {\n        .form-container {\n          display: flex;\n          align-items: center;\n          position: absolute;\n          bottom: 0;\n          width: 100%;\n          height: 60px;\n          padding: 20px;\n        }\n        .text-input {\n          outline: none;\n          width: 90%;\n          border-radius: 50px;\n          border: none;\n          padding: 10px 20px;\n          background-color: var(--dialogue-blue-clr);\n          color: var(--cement-gary-clr);\n        }\n        .send-btn {\n          margin-left: 1.5rem;\n          border: none;\n          background: none;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chatroom.vue?vue&type=template&id=9c45c592&scoped=true&\"\nimport script from \"./Chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./Chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chatroom.vue?vue&type=style&index=0&id=9c45c592&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9c45c592\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatData.vue?vue&type=style&index=0&id=328af7f7&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OnlineUsers.vue?vue&type=style&index=0&id=63190f12&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chatroom.vue?vue&type=style&index=0&id=9c45c592&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/icon_message.acdd2302.svg\";"],"sourceRoot":""}